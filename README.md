# Spring Boot + Containerized Mongo + Swagger

This is a sample project to show case: 
* Using a dockerized image of mongo for local development.
* Creating an image of the application we create. 
* Docker compose file that runs both the mongo and the application images in the same network. 

# Getting Started
## Step 1: Docker installation to windows
* [Download Docker Desktop for Windows](https://docs.docker.com/docker-for-windows/install/)
* _Just follow the steps mentioned on the above page_


## Step 2: Pull the Mongo's latest docker image 
* mongo image can be pulled by using the command
> docker pull mongo:latest

## Step 3: Start a container based on the pulled image and Accessing it from prompt
* Container based on pulled image can be started using the command 
> docker run -d -p 27017:27017 --name movie-mongodb mongo:latest
* To access the mongo shell use the following commands
>  docker exec -it mongodb bash
* This will lead us into the container, now type 
> mongo 
* Now you can use the mongo command

## Step 4: Create a Spring Boot App
* [Spring Boot Initializer](https://start.spring.io/) helps us to initialize the project
* Add Spring Boot Web, Spring Boot Data Mongo and Swagger dependencies 
* Generate the project and import to IntelliJ
* Create the Business logic as per the src folder
    * We are trying to create an app that store movie names and category of the movie in the db
    * The db is an image and not actually installed on the host system
* In the application.yml files add the mongo properties

## Step 5: Create Dockerfile
* The Dockerfile in this project, copies the jar generated by the build to the container file structure. 
* Then the command java -jar <<jar name>> is given as the entry point

## Step 6: Create image of the application
* package the application 
> mvn package
* build the image
> docker build -t [image name] .


## Step 7: Create docker-compose.yml file 
* create a network
* specify the service and ports
* specify the images
* specify the environment variables. 
    * In normal scenario, the application communicates to mongo via **localhost:27017** port, But in containerized env, they can communicate using the container-name
    * Hence in the docker-compose.yml specify the MONGO_HOST for the as the continer name

## Step 8: Running the application using docker-compose    
* To run the application using the docker-compose.yml file use the command
> docker-compose -f docker-compose.yml up

## Step 9: Stopping the application using docker-compose
* To Stop the application use the command
> docker-compose -f docker-compose.yml down



